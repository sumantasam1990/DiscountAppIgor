{"version":3,"file":"src_app_create-cart-product-images_create-cart-product-images_module_ts.js","mappings":"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","sources":["./src/app/create-cart-product-images/create-cart-product-images-routing.module.ts","./src/app/create-cart-product-images/create-cart-product-images.module.ts","./src/app/create-cart-product-images/create-cart-product-images.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CreateCartProductImagesPage } from './create-cart-product-images.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CreateCartProductImagesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CreateCartProductImagesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CreateCartProductImagesPageRoutingModule } from './create-cart-product-images-routing.module';\n\nimport { CreateCartProductImagesPage } from './create-cart-product-images.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CreateCartProductImagesPageRoutingModule\n  ],\n  declarations: [CreateCartProductImagesPage]\n})\nexport class CreateCartProductImagesPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {Camera, CameraResultType} from '@capacitor/camera';\nimport Swal from 'sweetalert2';\nimport {environment} from '../../environments/environment';\nimport {LoadingController} from '@ionic/angular';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {HttpClient} from '@angular/common/http';\n\n@Component({\n  selector: 'app-create-cart-product-images',\n  templateUrl: './create-cart-product-images.page.html',\n  styleUrls: ['./create-cart-product-images.page.scss'],\n})\nexport class CreateCartProductImagesPage implements OnInit {\n\n  imageData = '';\n  mainPhoto = '';\n  urlCartSave: string = environment.serverAPI + 'cart/save/step4';\n  urlGetPhotos: string = environment.serverAPI + 'get/product/images/';\n  prodId = '';\n  photos: any = [];\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private http: HttpClient,\n    private loadingctrl: LoadingController,\n  ) { }\n\n  ngOnInit() {\n    this.prodId = this.route.snapshot.paramMap.get('id');\n\n    this.http.get(this.urlGetPhotos + this.prodId).subscribe((res: any) => {\n      this.photos = res.data;\n    });\n\n  }\n\n  async takePhoto() {\n    const image = await Camera.getPhoto({\n      quality: 60,\n      allowEditing: true,\n      resultType: CameraResultType.Base64,\n      saveToGallery: true,\n      presentationStyle: 'popover',\n    });\n    this.imageData = image.base64String;\n    this.mainPhoto = image.webPath;\n  }\n\n  async presentLoading() {\n    const loading = await this.loadingctrl.create({\n      cssClass: 'my-custom-class',\n      message: 'Please wait... Do not close or minimize or back the app',\n      duration: 15000\n    });\n    await loading.present();\n  }\n\n  async upload() {\n    await this.presentLoading();\n    const params = new URLSearchParams();\n    params.set('prod', this.prodId);\n    params.set('photo', this.imageData);\n\n    this.http.post<any>(this.urlCartSave, params).subscribe(response => {\n      this.loadingctrl.dismiss();\n      this.imageData = '';\n      if(response.upload) {\n        Swal.fire({\n          title: 'Success!',\n          icon: 'success',\n          heightAuto: false,\n        }).then(() => {\n          this.http.get(this.urlGetPhotos + this.prodId).subscribe((res: any) => {\n            this.photos = res.data;\n          });\n        });\n      } else {\n        Swal.fire({\n          title: 'Error!',\n          text: response.error,\n          icon: 'error',\n          heightAuto: false,\n        });\n      }\n    });\n  }\n\n  finish() {\n    this.router.navigate(['tabs/tab2']);\n  }\n\n}\n"],"names":["Component","Camera","CameraResultType","Swal","environment","LoadingController","ActivatedRoute","Router","HttpClient","CreateCartProductImagesPage","constructor","router","route","http","loadingctrl","serverAPI","ngOnInit","prodId","snapshot","paramMap","get","urlGetPhotos","subscribe","res","photos","data","takePhoto","image","getPhoto","quality","allowEditing","resultType","Base64","saveToGallery","presentationStyle","imageData","base64String","mainPhoto","webPath","presentLoading","loading","create","cssClass","message","duration","present","upload","params","URLSearchParams","set","post","urlCartSave","response","dismiss","fire","title","icon","heightAuto","then","text","error","finish","navigate","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}